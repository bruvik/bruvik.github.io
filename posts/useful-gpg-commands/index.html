<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Some useful GPG commands</title>
		<link rel="alternate" type="application/rss+xml" title="RSS" href="https://bruvik.me/index.xml">
		<link rel="canonical" href="https://bruvik.me/posts/useful-gpg-commands/">
		
		<link rel="shortcut icon" type="image/png" href="https://bruvik.me/apple-touch-icon-precomposed.png">
		
		
		<meta name="generator" content="Hugo 0.74.3" />

		
		<meta property="og:title" content="Some useful GPG commands" />
		<meta property="og:type" content="article" />
		<meta property="og:image" content="https://bruvik.me/img/default-header-img.jpg" />
		<meta property="og:description" content="" />
		<meta property="og:url" content="https://bruvik.me/posts/useful-gpg-commands/" />
		<meta property="og:site_name" content="Some useful GPG commands" />
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:site" content="@" />


		
		<link rel="stylesheet" href="https://bruvik.me/css/tachyons.min.css" />
		<link rel="stylesheet" href="https://bruvik.me/css/story.css" />
		<link rel="stylesheet" href="https://bruvik.me/css/descartes.css" />
		
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
		<link href="https://fonts.googleapis.com/css?family=Quattrocento+Sans:400,400i,700,700i|Quattrocento:400,700|Spectral:400,400i,700,700i&amp;subset=latin-ext" rel="stylesheet">
		

		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		
		<script src="https://bruvik.me/js/story.js"></script>

	</head>
	<body class="ma0 bg-white section-posts page-kind-page is-page-true ">
		
		<header class="cover bg-top" style="background-image: url('https://bruvik.me/img/default-header-img.jpg'); background-position: center;">
			<div class="bg-black-30 bb bt">

				<nav class="hide-print sans-serif  border-box pa3 ph5-l">
					<a href="https://bruvik.me" title="Home">
						<img src="https://bruvik.me/img/logo.jpg" class="w2 h2 br-100" alt="Bruvik&#39;s blog" />
					</a>
					<div class="fr h2 pv2 tr">
						<a class="link f5 ml2 dim near-white" href="/">Home</a>
						<a class="link f5 ml2 dim near-white" href="/posts/">Archives</a>
						<a class="link f5 ml2 dim near-white" href="/about/">About me</a>
						<a class="link f5 ml2 dim near-white fas fa-rss-square" href="https://bruvik.me/index.xml" title="RSS Feed"></a>
						<a class="link f5 ml2 dim near-white fas fa-search" href="https://bruvik.me/search/" role="search" title="Search"></a>
					</div>
				</nav>

				<div id="hdr" class="tc-l pv4-ns pv5-l pv2 ph3 ph4-ns">
					<h1 class="near-white mt1-ns f2 fw3 mb0 mt0 lh-title">Some useful GPG commands</h1>
					<h2 class="near-white mt3-l mb4-l fw1 f6 f3-l measure-wide-l center lh-copy mt2 mb3">
						
						
							
								Published
								<time datetime="2020-02-12T00:00:00Z">Feb 12, 2020</time>
								<span class="display-print">by </span>
								
								<span class="display-print">at https://bruvik.me/posts/useful-gpg-commands/</span>
							
						
					</h2>
				</div>

				
				
				
				

			</div>
		</header>
		
		<main role="main">
		
<article class="center bg-white br-3 pv1 ph4 lh-copy f5 nested-links mw7">
	<h1 id="some-useful-gpg-commands">Some useful gpg commands</h1>
<p>I recently ran into a problem with some gpg encrypted file, where the files were encrypted with another key than they were supposed to. Therefore I had to reencrypt them with another key.
Every time I run into an unusual task with OpenGPG I find myself banging my head into a wall of useless documentation. Here’s some of the useful commands I found which let me resolve the issue:</p>
<p>First I had to find out what keys the file was actually encrypted with.</p>
<p><code>gpg --list-packets file.gpg</code> - lists contents of a gpg  encrypted package - including the key IDs used for encrypting the file. (The man page is of course less useful, since it only says “List  only  the  sequence  of  packets.   This command is only useful for debugging.” - but I haven’t found another way to do what I want)</p>
<p><code>% gpg --pinentry-mode cancel --list-packets &lt;file&gt;.gpg 2&gt;&amp;1</code> - if you only want to see which keys a file is encrypted with. (note, it will list the keys to STDERR, so therefor I added the redirect to STDOUT so I could grep for the key I was looking for)</p>
<p><code>% gpg -k --keyid-format short</code> and <code>% gpg -k --keyid-format long</code> - There is a long and short format for GPG keys. If you want to see the short or long format for the keyid when listing keys, add the <code>—-keyid-format</code> option.</p>
<p>Note: if you always want to print for instance long format, you could add <code>keyid-format long</code> to <code>~/.gnupg/gpg.conf</code></p>
<p>Want to know the fingerprint of the subkeys? Use <code>gpg -K --with-subkey-fingerprint --keyid-format none</code></p>
<p>A few useful links:</p>
<ul>
<li><a href="https://superuser.com/questions/1409511/how-to-check-if-a-gpg-encrypted-file-is-encrypted-using-a-specific-public-key">security - How to check if a GPG encrypted file is encrypted using a specific public key? - Super User</a></li>
<li><a href="https://askubuntu.com/questions/929307/how-to-change-the-gpg-key-of-the-pass-password-store">pgp - How to change the gpg key of the pass password store - Ask Ubuntu</a></li>
</ul>

</article>

		</main>
		
				<div class="hide-print sans-serif f6 f5-l mt5 ph3 pb6 center nested-copy-line-height lh-copy nested-links mw-100 measure-wide">
		<div class="about-the-author">
		
			
			
				
					
				
			
		
		</div>
		
	</div>

		
		
		
		<footer class="hide-print sans-serif f6 fw1 bg-black near-white bottom-0 w-100 pa3" role="contentinfo">
			<p class="w-50 fr tr">
			<a class="no-underline near-white" href="https://github.com/xaprb/story"><img class="dib" title="Made with Hugo and Story" alt="Story logo" src="https://bruvik.me/img/story-logo-white.svg" style="width: 1.5rem; height: 1.5rem" /></a>
			</p>
			<p class="w-50 near-white">
				&copy; 2020 
			</p>
		</footer>
		
	
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-57415328-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

	
	</body>
</html>
